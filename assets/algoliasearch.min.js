var VERSION="2.3.2",AlgoliaSearch=function(e,t,n,s,i){this.applicationID=e,this.apiKey=t,this._isUndefined(i)&&(i=[e+"-1.algolia.io",e+"-2.algolia.io",e+"-3.algolia.io"]),this.hosts=[];for(var o=0;o<i.length;++o).5<Math.random()&&this.hosts.reverse(),this._isUndefined(n)||null==n?this.hosts.push(("https:"==document.location.protocol?"https":"http")+"://"+i[o]):"https"===n||"HTTPS"===n?this.hosts.push("https://"+i[o]):this.hosts.push("http://"+i[o]);.5<Math.random()&&this.hosts.reverse(),(this._isUndefined(s)||s)&&this._jsonRequest({method:"GET",url:"/1/isalive"})};AlgoliaSearch.prototype={deleteIndex:function(e,t){this._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(e),callback:t})},moveIndex:function(e,t,n){var s={operation:"move",destination:t};this._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(e)+"/operation",body:s,callback:n})},copyIndex:function(e,t,n){var s={operation:"copy",destination:t};this._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(e)+"/operation",body:s,callback:n})},getLogs:function(e,t,n){this._isUndefined(t)&&(t=0),this._isUndefined(n)&&(n=10),this._jsonRequest({method:"GET",url:"/1/logs?offset="+t+"&length="+n,callback:e})},listIndexes:function(e){this._jsonRequest({method:"GET",url:"/1/indexes/",callback:e})},initIndex:function(e){return new this.Index(this,e)},listUserKeys:function(e){this._jsonRequest({method:"GET",url:"/1/keys",callback:e})},getUserKeyACL:function(e,t){this._jsonRequest({method:"GET",url:"/1/keys/"+e,callback:t})},deleteUserKey:function(e,t){this._jsonRequest({method:"DELETE",url:"/1/keys/"+e,callback:t})},addUserKey:function(e,t){var n={};n.acl=e,this._jsonRequest({method:"POST",url:"/1/keys",body:n,callback:t})},addUserKeyWithValidity:function(e,t,n,s,i){var o=this,a={};a.acl=e,a.validity=t,a.maxQueriesPerIPPerHour=n,a.maxHitsPerQuery=s,this._jsonRequest({method:"POST",url:"/1/indexes/"+o.indexName+"/keys",body:a,callback:i})},startQueriesBatch:function(){this.batch=[]},addQueryInBatch:function(e,t,n){var s="query="+t;this._isUndefined(n)||null==n||(s=this._getSearchParams(n,s)),this.batch.push({indexName:e,params:s})},clearCache:function(){this.cache={}},sendQueriesBatch:function(e,t){for(var n=this,s={requests:[],apiKey:this.apiKey,appID:this.applicationID},i=0;i<n.batch.length;++i)s.requests.push(n.batch[i]);if(window.clearTimeout(n.onDelayTrigger),!this._isUndefined(t)&&null!=t&&0<t){var o=window.setTimeout(function(){n._sendQueriesBatch(s,e)},t);n.onDelayTrigger=o}else this._sendQueriesBatch(s,e)},Index:function(e,t){this.indexName=t,this.as=e,this.typeAheadArgs=null,this.typeAheadPropertyName=null},_sendQueriesBatch:function(e,t){this._jsonRequest({cache:this.cache,method:"POST",url:"/1/indexes/*/queries",body:e,callback:t})},_jsonRequest:function(o){var a=this,d=o.callback,r=null,c=o.url;if(this._isUndefined(o.body)||(c=o.url+"_body_"+JSON.stringify(o.body)),this._isUndefined(o.cache)||(r=o.cache,this._isUndefined(r[c]))){var l=function(e){var i=0;return a._isUndefined(e)||(i=e),a.hosts.length<=i?void(a._isUndefined(d)||d(!1,{message:"Cannot contact server"})):(o.callback=function(e,t,n,s){t||a._isUndefined(s)||console.log("Error: "+s.message),t&&!a._isUndefined(o.cache)&&(r[c]=s),!t&&e&&i+1<a.hosts.length?l(i+1):a._isUndefined(d)||d(t,s)},o.hostname=a.hosts[i],void a._jsonRequestByHost(o))};l()}else this._isUndefined(d)||d(!0,r[c])},_jsonRequestByHost:function(s){var e=null,i=this;this._isUndefined(s.body)||(e=JSON.stringify(s.body));var t=s.hostname+s.url,o=null;"withCredentials"in(o=new XMLHttpRequest)?(o.open(s.method,t,!0),o.setRequestHeader("X-Algolia-API-Key",this.apiKey),o.setRequestHeader("X-Algolia-Application-Id",this.applicationID),null!=e&&o.setRequestHeader("Content-type","application/json")):"undefined"!=typeof XDomainRequest?(o=new XDomainRequest).open(s.method,t):console.log("your browser is too old to support CORS requests"),o.send(e),o.onload=function(e){if(i._isUndefined(e))s.callback(!1,!0,e,JSON.parse(o.responseText));else{var t=0===e.target.status||503===e.target.status,n=200===e.target.status||201===e.target.status;s.callback(t,n,e.target,null!=e.target.response?JSON.parse(e.target.response):null)}},o.onerror=function(){s.callback(!0,!1,null,{message:"Could not connect to Host"})}},_getSearchParams:function(e,t){if(this._isUndefined(e)||null==e)return t;for(var n in e)null!=n&&e.hasOwnProperty(n)&&(t+=0===t.length?"?":"&",t+=n+"="+encodeURIComponent("[object Array]"===Object.prototype.toString.call(e[n])?JSON.stringify(e[n]):e[n]));return t},_isUndefined:function(e){return void 0===e},applicationID:null,apiKey:null,hosts:[],cache:{}},AlgoliaSearch.prototype.Index.prototype={clearCache:function(){this.cache={}},addObject:function(e,t,n){var s=this;this.as._isUndefined(n)?this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(s.indexName),body:e,callback:t}):this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(s.indexName)+"/"+encodeURIComponent(n),body:e,callback:t})},addObjects:function(e,t){for(var n=this,s={requests:[]},i=0;i<e.length;++i){var o={action:"addObject",body:e[i]};s.requests.push(o)}this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(n.indexName)+"/batch",body:s,callback:t})},getObject:function(e,t,n){var s=this,i="";if(!this.as._isUndefined(n)){i="?attributes=";for(var o=0;o<n.length;++o)0!==o&&(i+=","),i+=n[o]}this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(s.indexName)+"/"+encodeURIComponent(e)+i,callback:t})},partialUpdateObject:function(e,t){var n=this;this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(n.indexName)+"/"+encodeURIComponent(e.objectID)+"/partial",body:e,callback:t})},saveObject:function(e,t){var n=this;this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(n.indexName)+"/"+encodeURIComponent(e.objectID),body:e,callback:t})},saveObjects:function(e,t){for(var n=this,s={requests:[]},i=0;i<e.length;++i){var o={action:"updateObject",objectID:encodeURIComponent(e[i].objectID),body:e[i]};s.requests.push(o)}this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(n.indexName)+"/batch",body:s,callback:t})},deleteObject:function(e,t){if(null!=e&&0!==e.length){var n=this;this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(n.indexName)+"/"+encodeURIComponent(e),callback:t})}else t(!1,{message:"empty objectID"})},search:function(e,t,n,s){var i=this,o="query="+encodeURIComponent(e);if(this.as._isUndefined(n)||null==n||(o=this.as._getSearchParams(n,o)),window.clearTimeout(i.onDelayTrigger),!this.as._isUndefined(s)&&null!=s&&0<s){var a=window.setTimeout(function(){i._search(o,t)},s);i.onDelayTrigger=a}else this._search(o,t)},getTypeaheadTransport:function(e,t){return this.typeAheadArgs=e,void 0!==t&&(this.typeAheadPropertyName=t),this},get:function(e,t,a,d,r){return(self=this).search(e,function(e,t){if(e){for(var n=0;n<t.hits.length;++n){var s=t.hits[n];if("undefined"==typeof s.value)if(null!=self.typeAheadPropertyName&&"undefined"!=typeof s[self.typeAheadPropertyName])s.value=s[self.typeAheadPropertyName];else{var i=!1;for(var o in s)!i&&s.hasOwnProperty(o)&&"string"==typeof s[o]&&(s.value=s[o],i=!0)}r.push(a._transformDatum(s))}d&&d(r)}},self.typeAheadArgs),!0},waitTask:function(n,s){var i=this;this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(i.indexName)+"/task/"+n,callback:function(e,t){if(e&&"published"===t.status)s(!0,t);else{if(e&&t.pendingTask)return i.waitTask(n,s);s(!1,t)}}})},clearIndex:function(e){var t=this;this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(t.indexName)+"/clear",callback:e})},getSettings:function(e){var t=this;this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(t.indexName)+"/settings",callback:e})},setSettings:function(e,t){var n=this;this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(n.indexName)+"/settings",body:e,callback:t})},listUserKeys:function(e){var t=this;this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(t.indexName)+"/keys",callback:e})},getUserKeyACL:function(e,t){var n=this;this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(n.indexName)+"/keys/"+e,callback:t})},deleteUserKey:function(e,t){var n=this;this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(n.indexName)+"/keys/"+e,callback:t})},addUserKey:function(e,t){var n=this,s={};s.acl=e,this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(n.indexName)+"/keys",body:s,callback:t})},addUserKeyWithValidity:function(e,t,n,s,i){var o=this,a={};a.acl=e,a.validity=t,a.maxQueriesPerIPPerHour=n,a.maxHitsPerQuery=s,this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(o.indexName)+"/keys",body:a,callback:i})},_search:function(e,t){this.as._jsonRequest({cache:this.cache,method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/query",body:{params:e,apiKey:this.as.apiKey,appID:this.as.applicationID},callback:t})},as:null,indexName:null,cache:{},typeAheadArgs:null,typeAheadPropertyName:null,emptyConstructor:function(){}};